<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="app.ConfigTest" tests="1" skipped="0" failures="0" errors="0" timestamp="2025-07-06T08:06:44" hostname="bottleCapsMBA.local" time="0.173">
  <properties/>
  <testcase name="conf()" classname="app.ConfigTest" time="0.173"/>
  <system-out><![CDATA[2025-07-06T08:06:40.621724Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.log.LogManager - not found -Dcore.appName, this should only happen in local dev env or test, use "local" as appName
2025-07-06T08:06:40.630921Z [bottleCapsMBA.local] [Test worker] INFO c.f.t.module.AbstractTestModule - initialize test context
2025-07-06T08:06:40.699213Z [bottleCapsMBA.local] [Test worker] INFO c.f.w.site.WebDirectory - can not locate web directory
2025-07-06T08:06:41.433053Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/vm, controller=core.framework.internal.web.sys.DiagnosticController.vm
2025-07-06T08:06:41.439245Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/thread, controller=core.framework.internal.web.sys.DiagnosticController.thread
2025-07-06T08:06:41.440216Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/heap, controller=core.framework.internal.web.sys.DiagnosticController.heap
2025-07-06T08:06:41.441425Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/proc, controller=core.framework.internal.web.sys.DiagnosticController.proc
2025-07-06T08:06:41.447216Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/property, controller=core.framework.internal.web.sys.PropertyController.execute
2025-07-06T08:06:41.447619Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/api, controller=null.execute
2025-07-06T08:06:41.447833Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/api/message, controller=null.execute
2025-07-06T08:06:41.447993Z [bottleCapsMBA.local] [Test worker] INFO c.f.t.module.AbstractTestModule - initialize application
2025-07-06T08:06:42.656867Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load module, module=app.MonitorApp
2025-07-06T08:06:42.657629Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load module, module=core.framework.module.SystemModule
2025-07-06T08:06:42.657951Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load properties, classpath=sys.properties
2025-07-06T08:06:42.704991Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load properties, classpath=app.properties
2025-07-06T08:06:42.708132Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load module, module=app.AlertModule
2025-07-06T08:06:43.573118Z [bottleCapsMBA.local] [Test worker] INFO c.f.h.HTTPClientBuilder - create http client, elapsed=835252791
2025-07-06T08:06:43.581636Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.module.PropertyManager - found overridden property by system property -Dapp.alert.config, key=app.alert.config, value={
  "ignoreErrors": [
    {"apps": ["website"], "errorCodes": ["PATH_NOT_FOUND"]}
  ],
  "criticalErrors": [],
  "kibanaURL": "http://kibana:5601",
  "notifications": [
    {"channel": "actionWarnChannel", "matcher": {"severity": "WARN", "indices": ["trace", "stat"]}},
    {"channel": "actionErrorChannel", "matcher": {"severity": "ERROR", "indices": ["trace", "stat"]}},
    {"channel": "eventWarnChannel", "matcher": {"severity": "WARN", "indices": ["event"]}},
    {"channel": "eventErrorChannel", "matcher": {"severity": "ERROR", "indices": ["event"]}},
    {"channel": "additionalErrorCodeChannel", "matcher": {"apps": ["product-service"], "errorCodes": ["PRODUCT_ERROR"]}},
    {"channel": "pagerduty://serviceId", "matcher": {"apps": ["kafka"], "errorCodes": ["HIGH_DISK_USAGE"], "indices": ["stat"]}},
    {"channel": "pagerduty://serviceId?priorityId=mockPriorityId&escalationPolicyId=mockEscalationPolicyId", "matcher": {"apps": ["kafka"], "errorCodes": ["HIGH_DISK_USAGE"], "indices": ["stat"]}}
  ]
}

2025-07-06T08:06:44.234455Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=POST, path=/_sys/kafka/topic/:topic/key/:key/handle, controller=core.framework.internal.web.sys.KafkaController.handle
2025-07-06T08:06:44.240065Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.KafkaConfig - subscribe, topic=action-log-v2, messageClass=core.framework.log.message.ActionLogMessage, handlerClass=app.monitor.kafka.ActionLogMessageHandler, name=null
2025-07-06T08:06:44.277242Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.KafkaConfig - subscribe, topic=stat, messageClass=core.framework.log.message.StatMessage, handlerClass=app.monitor.kafka.StatMessageHandler, name=null
2025-07-06T08:06:44.285166Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.KafkaConfig - subscribe, topic=event, messageClass=core.framework.log.message.EventMessage, handlerClass=app.monitor.kafka.EventMessageHandler, name=null
2025-07-06T08:06:44.294187Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.Module - load module, module=app.MonitorModule
2025-07-06T08:06:44.295195Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.module.PropertyManager - found overridden property by system property -Dapp.monitor.config, key=app.monitor.config, value={
  "redis": {
    "session": {
      "hosts": ["session-0.session"],
      "highMemUsageThreshold": 0.8
    }
  },
  "es": {
    "log": {
      "host": "log-es-0.log-es",
      "highHeapUsageThreshold": 0.7,
      "highDiskUsageThreshold": 0.7
    }
  },
  "kafka": {
    "log": {
      "hosts": ["log-kafka-0.log-kafka"],
      "highHeapUsageThreshold": 0.7,
      "highDiskSizeThreshold": 50000000000
    }
  },
  "mongo": {
    "mongo": {
      "host": "mongo-0.mongo",
      "highDiskUsageThreshold": 0.7
    }
  },
  "kube": {
    "namespaces": ["ops", "app"]
  },
  "api": {
    "services": ["https://website"]
  }
}

2025-07-06T08:06:44.437894Z [bottleCapsMBA.local] [Test worker] INFO c.f.m.KafkaConfig - publish, topic=stat, messageClass=core.framework.log.message.StatMessage, name=null
2025-07-06T08:06:44.493476Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=GET, path=/_sys/job, controller=core.framework.internal.web.sys.SchedulerController.jobs
2025-07-06T08:06:44.494353Z [bottleCapsMBA.local] [Test worker] INFO c.f.i.w.route.Route - route, method=POST, path=/_sys/job/:job, controller=core.framework.internal.web.sys.SchedulerController.triggerJob
2025-07-06T08:06:44.540226Z [bottleCapsMBA.local] [Test worker] INFO c.f.h.HTTPClientBuilder - create http client, elapsed=958459
2025-07-06T08:06:44.824538Z [bottleCapsMBA.local] [Test worker] INFO o.m.d.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.10.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.5"}, "platform": "Java/Azul Systems, Inc./17.0.15+6-LTS", "application": {"name": "local"}} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@9da386c, com.mongodb.Jep395RecordCodecProvider@492a220e, com.mongodb.KotlinCodecProvider@5f5fb335]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[mongo-0.mongo:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='0 ms', localThreshold='0 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='local', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-07-06T08:06:44.845288Z [bottleCapsMBA.local] [cluster-ClusterId{value='686a2e94739e3e4aab22ef9b', description='local'}-mongo-0.mongo:27017] INFO o.m.d.cluster - Exception in monitor thread while connecting to server mongo-0.mongo:27017
com.mongodb.MongoSocketException: mongo-0.mongo
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217)
	at com.mongodb.internal.connection.ServerAddressWithResolver.getSocketAddresses(ServerAddressWithResolver.java:66)
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:78)
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:209)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:199)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:159)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.UnknownHostException: mongo-0.mongo
	at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:801)
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:887)
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1385)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306)
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209)
	... 7 more
2025-07-06T08:06:44.876557Z [bottleCapsMBA.local] [Test worker] INFO c.f.t.module.TestModuleContext - override binding, type=app.monitor.job.KubeClient, name=null
2025-07-06T08:06:44.915650Z [bottleCapsMBA.local] [Test worker] INFO c.f.h.HTTPClientBuilder - create http client, elapsed=1903250
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
